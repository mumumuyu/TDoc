# Netty

#### 简介

##### Netty是什么？

1.是一个**异步**的，**基于事件驱动**的网络应用框架，用以开发高性能高可靠的网络IO程序

2.主要针对**TCP**协议，面向Clients的高并发应用

3.本质为一个**NIO**框架，适用于服务器通讯相关

##### 应用：

RPC框架，Netty作为异步高性能的通信框架，一般作为基础组件被RPC框架使用

如Dubbo的RPC，大数据也会有(Hadoop,Flink,Spark)

#### IO模型

用什么样的通道进行数据发送与接收，大程度决定了程序通信的性能

有BIO,NIO,AIO

- BIO:服务器实现模式为一个连接Socket一个线程，并发大后线程就不够了，如果连接了但不做事，会被浪费线程开销,而且一个线程如果在跑的时候没有读到东西会一直等待，阻塞下去

  JDK1.4前,Java原生IO(线程池改善)

- NIO：同步非阻塞，一个线程多个连接，C端请求会注册到多路复用器(选择器维护多个连接与通道)上，多路复用会轮询这些通道，如果有事件则进行选择。因为C端并不是时时刻刻都在进行Read/Write，会有闲置事件，这样能更好利用S端资源

  连接数多且时间短，聊天服务

- AIO(NIO2)：异步非阻塞，采用Proactor模式，有效的请求才会启动线程，用于连接数多且连接时间较长的应用

NIO基于(IO与网络)

#### BIO(Blocking I/O)

原生IO，阻塞式IO，

流程

1. S创建ServerSocket
2. C端启动Socket
3. C端发出请求后先咨询S是否有线程响应，如果没有进入等待或者被拒绝
4. 如果有响应，C端会等待请求结束后才继续执行(阻塞)