# ç½‘ç»œç¼–ç¨‹

çŸ¥é“è¦å‘ç»™è°ï¼Œå‘ä»€ä¹ˆï¼Œè°å‘çš„å°±å¯ä»¥é€šä¿¡

æ•°æ®æ˜¯ä¿¡æ¯çš„è½½ä½“

é‚£ä¹ˆï¼Œå¦‚ä½•å®šä½å¯¹æ–¹åœ°å€å‘¢ï¼Ÿ

1. ä½¿ç”¨ip + ç«¯å£port
2. å¦‚ä½•ä¼ è¾“å‘¢ï¼Ÿ

javaweb: ç½‘é¡µç¼–ç¨‹ B/S

ç½‘ç»œç¼–ç¨‹ï¼š TCP/IP C/S

### é€šä¿¡è¦ç´ 

å¦‚ä½•å®ç°é€šä¿¡ï¼Ÿ

éœ€è¦åŒæ–¹åœ°å€ï¼š

- ip	å…¬ç½‘ipv4 or ipv6
- port

åè®®ï¼šhttp,ftp,udp,tcpï¼Œsmtp

OSIä¸ƒå±‚æ¨¡å‹

ç†è®ºäº”å±‚ï¼šåº”ç”¨å±‚	ä¼ è¾“å±‚	ç½‘ç»œå±‚	æ•°æ®é“¾è·¯å±‚ ç‰©ç†å±‚

TCP/IPå››å±‚

è¿™é‡Œæˆ‘ä»¬ä¸»è¦å­¦ä¹ ä¸‹ä¼ è¾“å±‚çš„TCP,UDP

å…·ä½“è®¡ç½‘è¿™é—¨è¯¾å¾ˆå¤šå†…å®¹è¯¾ä¸Šå­¦ï¼Œé€šä¿¡= =

1. ç½‘ç»œç¼–ç¨‹çš„é—®é¢˜
   - å¦‚ä½•å‡†ç¡®å®šä½ä¸€å°æˆ–å¤šå°ï¼Ÿip+port
   - æ‰¾åˆ°åå¦‚ä½•é€šä¿¡ï¼Ÿsocketï¼ˆå£è¢‹ï¼‰
2. è¦ç´ 
   - ä¸Šè¿°ip + pory
   - é€šä¿¡åè®®udp tcp
3. ä¸‡ç‰©çš†å¯¹è±¡ï¼Œæ²¡æœ‰å’±å°±newä¸€ä¸ª

### IP

ipåœ°å€ï¼šInetAddress

- å”¯ä¸€å®šä½ä¸€å°ç½‘ç»œä¸Šçš„è®¡ç®—æœº

- 127.0.0.1   localhost

- ipåˆ†ç±»

  - ipåœ°å€åˆ†ç±»

    - v4 42äº¿ä¸ªï¼ˆ30äº¿ä¸ªåœ¨åŒ—ç¾ï¼ŒğŸ¤®ï¼‰

    - v6 128ä½ 8ä¸ªæ— ç¬¦å·æ•´æ•° æ²™å­éƒ½è¡Œ

      ```
      2001:0bb3:adad:0042:5656:2312:4dsa:d56s
      ```

  - å…¬ç½‘(Internet)ä¸ç§ç½‘ï¼ˆå±€åŸŸç½‘ï¼‰

    - 192.168.xx.xx
    - ABCDç±»åœ°å€

- åŸŸåï¼šè®°å¿†IPï¼Œå› ä¸ºIPä¸€å †æ•°å­—è®°ä¸ä½

  - åŸŸåæ¯”å¦‚www.baidu.com,www.leigd.cn

```java
InetAddress byName1 = InetAddress.getByName("127.0.0.1");
System.out.println(byName1);
InetAddress byName2 = InetAddress.getByName("localhost");
System.out.println(byName2);
InetAddress byName3 = InetAddress.getLocalHost();
System.out.println(byName3);

InetAddress byName = InetAddress.getByName("www.leigd.cn");
System.out.println(byName);///åŸŸåorç”µè„‘å + ip
System.out.println(byName.getCanonicalHostName());//è§„èŒƒçš„åå­—
System.out.println(byName.getHostName());//åŸŸåï¼Œæˆ–è€…è‡ªå·±ç”µè„‘çš„åå­—
```

### ç«¯å£ Port

è¡¨ç¤ºè®¡ç®—æœºä¸Šçš„ä¸€ä¸ªç¨‹åºçš„è¿›ç¨‹

- ä¸åŒçš„è¿›ç¨‹æœ‰ä¸åŒç«¯å£å·ï¼Œç«¯å£å·å¿…ç„¶ä¸é˜”ä»¥å†²çª

- ä¸€èˆ¬ç«¯å£ä¸º0~65535ã€

- TCP,UDP ï¼š 2*xxx

- ç«¯å£åˆ†ç±»

  - å…¬æœ‰ç«¯å£ 0 ~1023

    - http é»˜è®¤ç«¯å£80
    - https: 43 ï¼ˆSSLå¯†é’¥ï¼‰
    - FTP: 21
    - Telent: 23

  - ç¨‹åºæ³¨å†Œç«¯å£ï¼š 1024~49151,åˆ†é…ç”¨æˆ·æˆ–ç¨‹åº

    - Tomcat: 8080
    - MySQL: 3306
    - Oracleï¼š 1521
    - IDEAï¼š66432

  - åŠ¨æ€ï¼Œç§æœ‰ï¼š49152~65535

    ```
    netstat -ano
    netstat -ano|findstr 5900
    ```
    

```java
InetSocketAddress inetSocketAddress = new InetSocketAddress("127.0.0.1", 8080);
System.out.println(inetSocketAddress);

System.out.println(inetSocketAddress.getHostName());
System.out.println(inetSocketAddress.getAddress());
System.out.println(inetSocketAddress.getPort());
```

### é€šä¿¡åè®®

åè®®å°±æ˜¯çº¦å®šï¼Œçº¦å®šä¿—æˆçš„ä¸€äº›é…ç½®å¦‚é€Ÿç‡ï¼Œä¼ è¾“ç ç‡ï¼Œä»£ç ç»“æ„ï¼Œä¼ è¾“æ§åˆ¶â€¦â€¦

å¤ªå¤æ‚ï¼Œå°±å¤§äº‹åŒ–å°ï¼Œæ¯”å¦‚çº¯webé…ç½®å¤ªéº»çƒ¦ï¼Œå°±ç»™ä½ ä»¬å¼„äº†ä¸ªspringæ¡†æ¶æå‡æ•ˆç‡ï¼Œspringé…ç½®åœ°ç‹±å¤ªéº»çƒ¦å°±åˆå¼„äº†ä¸ªspringbootã€‚libå¯¼åŒ…ä¹Ÿéº»çƒ¦å°±å‡ºäº†ä¸ªMavenï¼ˆä¸ªäººç†è§£ï¼‰

TCP/IPï¼š æ˜¯ä¸€ç»„åè®®

- TCPï¼šç”¨æˆ·ä¼ è¾“åè®®ï¼šæ‰“ç”µè¯

  - è¿æ¥ï¼Œç¨³å®š

  - ä¸‰æ¬¡æ¡æ‰‹ï¼Œå››æ¬¡æŒ¥æ‰‹

    ```
    ä¸‰æ¬¡æ¡æ‰‹ï¼š
    Aï¼šè¯·æ±‚
    B: å¯ä»¥
    A: æ”¶åˆ°ï¼Œæ¥
    
    å››æ¬¡æŒ¥æ‰‹ï¼š
    çœ‹äº†ä¸“ä¸šä¹¦å†æ¥= =
    ```

  - å®¢æˆ·ç«¯ï¼ŒæœåŠ¡ç«¯

- UDPï¼šç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼šå‘çŸ­ä¿¡

  - ä¸è¿æ¥ï¼Œä¸ç¨³å®š
  - å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯æ²¡æœ‰æ˜ç¡®ç•Œé™
  - æ— è®ºå¯¹æ–¹å‡†æ²¡å‡†å¤‡å¥½ï¼Œéƒ½å¯ä»¥å‘ç»™ä½ 
  - DDOSï¼šæ´ªæ°´æ”»å‡»ï¼Œå‘ä¸€å †æ— ç”¨è¯·æ±‚ç»™ä½ ï¼Œé€ æˆæœåŠ¡å™¨å µå¡

- IPï¼šç½‘ç»œäº’è¿åè®®

### TCPå®ç°èŠå¤©

è¿™é‡Œæˆ‘æ²¡æœ‰try-catch

åœ¨çœŸå®æ˜¯åº”ç”¨ä¸­ä¸€å®šè¦å¤šç”¨try--catch

è¿™æ ·å³ä½¿æˆ‘ä»¬çš„ä»£ç å‡ºé”™äº†ï¼Œä¹Ÿä¸ä¼šå¯¼è‡´æœåŠ¡ä¸€ä¸‹å­å´©æ‰

Cilent

```java
InetAddress byName = InetAddress.getByName("127.0.0.1");
        int port = 9999;
        Socket socket = new Socket(byName,port);
        //å‘æ¶ˆæ¯ IOæµ
        OutputStream outputStream = socket.getOutputStream();

        outputStream.write("ä½ å¥½ï¼Œè¿™é‡Œæ˜¯å®¢æˆ·ç«¯".getBytes(StandardCharsets.UTF_8));

        socket.close();
        outputStream.close();
```

Server

```java
ServerSocket serverSocket = new ServerSocket(9999);
        //è·å–åˆ°è¿è¿‡æ¥çš„å®¢æˆ·ç«¯
        Socket accept = serverSocket.accept();
        // è¯»å–å®¢æˆ·ç«¯æ¶ˆæ¯
        InputStream inputStream = accept.getInputStream();
        //ç®¡é“æµ
        ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
        byte[] buffer = new byte[1024];
        int len;
        while((len=inputStream.read(buffer))!=-1){
            byteArrayOutputStream.write(buffer,0,len);
        }
        System.out.println(byteArrayOutputStream.toString());

        inputStream.close();
        accept.close();
        byteArrayOutputStream.close();
```

æ€»ç»“æ¥è¯´å°±æ˜¯ï¼š

- å…ˆå»ºç«‹æœåŠ¡çš„ç«¯å£ Server Socket
- ç„¶åç­‰å¾…ç”¨æˆ·çš„è¿æ¥ accept
- æ¥å—åˆ°ç”¨æˆ·çš„ä¿¡æ¯

